{% load static %}
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
    .chart-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); /* Responsive grid layout */
        gap: 20px;
        padding: 20px;
    }

    .chart-card {
        background: white;
        border-radius: 10px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        padding: 15px;
        transition: transform 0.2s, box-shadow 0.2s;
    }

    .chart-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
    }

    .chart {
        width: 100%;
        height: 200px; /* Increased height for better visibility */
    }

    .chart-title {
        font-weight: 500;
        font-size: 1.5rem;
        color: #333;
        text-align: center;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .chart-title img {
        vertical-align: middle;
        margin-right: 10px;
    }

    /* Tooltip styles */
    .tooltip {
        position: relative;
    }
    .tooltip .tooltiptext {
        visibility: hidden;
        width: 120px;
        background-color: black;
        color: #fff;
        text-align: center;
        border-radius: 5px;
        padding: 5px;
        position: absolute;
        z-index: 1;
        bottom: 125%; /* Position above the tooltip */
        left: 50%;
        margin-left: -60px; /* Center the tooltip */
        opacity: 0;
        transition: opacity 0.3s;
    }
    .tooltip:hover .tooltiptext {
        visibility: visible;
        opacity: 1;
    }
</style>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<div class="chart-container">
    <!-- Total Count Chart -->
    <div class="chart-card tooltip">
        <div class="chart-title">
            <img src="{% static 'images/d.png' %}" alt="Image" class="h-8 w-8"> Total Count
            <span class="tooltiptext">Total number of products, suppliers, and categories.</span>
        </div>
        <canvas id="total-products-chart" class="chart"></canvas>
    </div>

    <!-- Line Chart -->
    <div class="chart-card tooltip">
        <div class="chart-title">
            <img src="{% static 'images/d.png' %}" alt="Image" class="h-8 w-8"> Monthly Sales
            <span class="tooltiptext">Sales data for each month.</span>
        </div>
        <canvas id="line-chart" class="chart"></canvas>
    </div>

    <!-- Category Distribution Chart -->
    <div class="chart-card tooltip">
        <div class="chart-title">
            <img src="{% static 'images/d.png' %}" alt="Image" class="h-8 w-8"> Category Distribution
            <span class="tooltiptext">Distribution of products across categories.</span>
        </div>
        <canvas id="category-distribution-chart" class="chart"></canvas>
    </div>

    <!-- Doughnut Chart -->
    <div class="chart-card tooltip">
        <div class="chart-title">
            <img src="{% static 'images/d.png' %}" alt="Image" class="h-8 w-8"> Doughnut Chart
            <span class="tooltiptext">Visual representation of categories.</span>
        </div>
        <canvas id="doughnut-chart" class="chart"></canvas>
    </div>
</div>

<script>
    // Total Count Chart
    var totalProductsData = JSON.parse('{{ total_products_data|escapejs }}');
    var labels = ['Products', 'Suppliers', 'Categories'];
    var data = totalProductsData[0].y;

    var ctx = document.getElementById('total-products-chart').getContext('2d');
    var totalProductsChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [{
                label: 'Total Count',
                data: data,
                backgroundColor: ['#008080', '#FF69B4', '#FFF176']
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });

    // Category Distribution Pie Chart
    var categoryLabels = JSON.parse('{{ category_labels|escapejs }}');
    var categoryValues = JSON.parse('{{ category_values|escapejs }}');

    var ctx2 = document.getElementById('category-distribution-chart').getContext('2d');
    var categoryDistributionChart = new Chart(ctx2, {
        type: 'pie',
        data: {
            labels: categoryLabels,
            datasets: [{
                data: categoryValues,
                backgroundColor: ['#008080', '#FF69B4', '#E57373', '#FFF176', '#2196F3', '#5C6BC0', '#9C27B0', '#4CAF50', '#FF9800', '#795548', '#607D8B']
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    display: true,
                    position: 'bottom',
                },
                tooltip: {
                    callbacks: {
                        label: function(tooltipItem) {
                            return categoryLabels[tooltipItem.dataIndex] + ': ' + categoryValues[tooltipItem.dataIndex] + '%';
                        }
                    }
                }
            }
        }
    });

    // Line Chart
    var lineLabels = ['January', 'February', 'March', 'April', 'May', 'June', 'July'];
    var lineData = [30, 45, 32, 50, 70, 65, 85];

    var ctx3 = document.getElementById('line-chart').getContext('2d');
    var lineChart = new Chart(ctx3, {
        type: 'line',
        data: {
            labels: lineLabels,
            datasets: [{
                label: 'Monthly Sales',
                data: lineData,
                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                borderColor: 'rgba(75, 192, 192, 1)',
                borderWidth: 2,
                fill: true,
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });

    // Doughnut Chart
    var doughnutLabels = ['Category 1', 'Category 2', 'Category 3'];
    var doughnutData = [50, 30, 20];

    var ctx4 = document.getElementById('doughnut-chart').getContext('2d');
    var doughnutChart = new Chart(ctx4, {
        type: 'doughnut',
        data: {
            labels: doughnutLabels,
            datasets: [{
                data: doughnutData,
                backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56']
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    display: true,
                    position: 'bottom',
                }
            }
        }
    });
</script>
